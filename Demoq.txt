<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple Patient Form</title>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-6 bg-gray-50">

  <h2 class="text-xl font-bold mb-4">Patient Form</h2>

  <!-- Simple Form -->
  <form id="patientForm" class="mb-4 space-y-2">
    <input type="text" id="name" placeholder="Name" class="border p-1 w-full rounded">
    <input type="text" id="bloodGroup" placeholder="Blood Group" class="border p-1 w-full rounded">
    <input type="text" id="bmi" placeholder="BMI" class="border p-1 w-full rounded">
    <button type="submit" class="bg-blue-500 text-white px-3 py-1 rounded">Save</button>
  </form>

  <!-- Table -->
  <table class="w-full border border-gray-300 bg-white rounded">
    <thead class="bg-gray-100">
      <tr>
        <th class="p-2 border">Name</th>
        <th class="p-2 border">Blood Group</th>
        <th class="p-2 border">BMI</th>
        <th class="p-2 border">Actions</th>
      </tr>
    </thead>
    <tbody id="patientsBody"></tbody>
  </table>

  <script>
    $(document).ready(function() {
      let patients = JSON.parse(localStorage.getItem('patients')) || [];
      let editIndex = -1;

      function renderTable() {
        let $tbody = $('#patientsBody');
        $tbody.empty();
        patients.forEach((p, index) => {
          $tbody.append(`
            <tr class="border-b">
              <td class="p-2 border">${p.name}</td>
              <td class="p-2 border">${p.bloodGroup}</td>
              <td class="p-2 border">${p.bmi}</td>
              <td class="p-2 border">
                <button class="edit bg-yellow-400 px-2 py-1 rounded mr-1" data-index="${index}">Edit</button>
                <button class="delete bg-red-500 px-2 py-1 rounded" data-index="${index}">Delete</button>
              </td>
            </tr>
          `);
        });
      }

      renderTable();

      $('#patientForm').submit(function(e) {
        e.preventDefault();
        let patient = {
          name: $('#name').val(),
          bloodGroup: $('#bloodGroup').val(),
          bmi: $('#bmi').val()
        };

        if(editIndex === -1) {
          patients.push(patient);
        } else {
          patients[editIndex] = patient;
          editIndex = -1;
        }

        localStorage.setItem('patients', JSON.stringify(patients));
        renderTable();
        $(this)[0].reset();
      });

      $(document).on('click', '.edit', function() {
        editIndex = $(this).data('index');
        let p = patients[editIndex];
        $('#name').val(p.name);
        $('#bloodGroup').val(p.bloodGroup);
        $('#bmi').val(p.bmi);
      });

      $(document).on('click', '.delete', function() {
        let index = $(this).data('index');
        patients.splice(index, 1);
        localStorage.setItem('patients', JSON.stringify(patients));
        renderTable();
      });
    });
  </script>

</body>
</html>
