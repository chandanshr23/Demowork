use SQLTraining;
Create Schema Chandan3;

create table chandan.Movies(
Movie_ID int identity(1,1) Primary key,
Movie_Name varchar(100) Not null,
Movie_Genre varchar(100),
Movie_Language varchar(100),
Movie_Release DATE,
Movie_Duration Int,
Movie_Rating decimal(2,1) Check (Movie_Rating between 0 and 10),
isDelete Bit default 0
);

create table  chandan.Theatres(
Theatre_ID int identity(1,1) Primary Key Not null,
Theatre_Name varchar(100) Not null,
Theatre_Location varchar(100),
Theatre_Rating decimal(2,1) Check(Theatre_Rating between 0 and 10),
Total_Seats int not null,
isDelete bit default 0
);

create table chandan.Movie_Show(
Show_ID int identity(1,1) Primary key not null,
Movie_ID int foreign key(Movie_ID) references chandan.Movies(Movie_ID),
Theatre_ID int foreign key(Theatre_ID) references chandan.Theatres(Theatre_ID),
Show_Time datetime,
Show_Price int not null,
isDelete bit default 0
);
create table chandan.Movie_Customers(
Customer_ID int identity(1,1) Primary key not null,
username varchar(50),
password varchar(50),
customer_email varchar(50),
phone varchar(15),
isDelete bit default 0
);

create table chandan.Show_Seats(
Seat_ID int identity(1,1) Primary key not null,
Theatre_ID int foreign key(Theatre_ID) references chandan.Theatres(Theatre_ID),
Seat_Number varchar(50),
Seat_Type varchar(50),
isBooked bit default 0
);
create table chandan.Movie_Booking(
Booking_ID int identity(1,1) Primary key not null,
Customer_ID int foreign key(Customer_ID) references chandan.Movie_Customers(Customer_ID),
Show_ID int foreign key(Show_ID) references chandan.Movie_Show(Show_ID),
Booking_Date datetime,
Total_Amount decimal(10,2),
Status varchar(50)
);
create table chandan.Booking_Payment(
Payment_ID int identity(1,1) Primary key not null,
Booking_ID int foreign key(Booking_ID) references chandan.Movie_Booking(Booking_ID),
Payment_Type varchar(50),
Amount decimal(10,2),
Payment_Time datetime,
Payment_Status varchar(50)
);
create table chandan.Booking_Details(
Details_ID int identity(1,1) Primary key not null,
Booking_ID int foreign key(Booking_ID) references chandan.Movie_Booking(Booking_ID),
Seat_ID int  foreign key(Seat_ID) references chandan.Show_Seats(Seat_ID)
);
